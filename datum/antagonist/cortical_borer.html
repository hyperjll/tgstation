<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/antagonist/cortical_borer - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/antagonist/cortical_borer.html#var">Var Details</a> - <a href="datum/antagonist/cortical_borer.html#proc">Proc Details</a></header><main><h1>cortical_borer <aside>/<a href="datum.html">datum</a>/<a href="datum/antagonist.html">antagonist</a>/<a href="datum/antagonist/cortical_borer.html">cortical_borer</a></aside> <a href="https://github.com/hyperjll/tgstation/blob/be45a28c4b65857d23dc903f76861c7a8b838eb4/hypermods/code/modules/antagonists/borers/code/antagonist_stuff/antagonist_datum.dm#L1"><img src="git.png" width="16" height="16" title="hypermods/code/modules/antagonists/borers/code/antagonist_stuff/antagonist_datum.dm 1"></a></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/antagonist/cortical_borer.html#var/borer_mob_type">borer_mob_type</a></th><td>Borer mob type, used for antag token spawns.</td></tr><tr><th><a href="datum/antagonist/cortical_borer.html#var/cortical_owner">cortical_owner</a></th><td>Our linked borer, used for the antagonist panel TGUI</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/antagonist/cortical_borer.html#proc/on_gain">on_gain</a></th><td>/datum/antagonist/cortical_borer/antag_token(datum/mind/hosts_mind, mob/spender)
var/list/vents = list()
for(var/obj/machinery/atmospherics/components/unary/vent_pump/temp_vent as anything in SSmachines.get_machines_by_type_and_subtypes(/obj/machinery/atmospherics/components/unary/vent_pump))
if(QDELETED(temp_vent))
continue
if(is_station_level(temp_vent.loc.z) &amp;&amp; !temp_vent.welded)
var/datum/pipeline/temp_vent_parent = temp_vent.parents[1]
if(!temp_vent_parent)
continue // No parent vent
// Stops Cortical Borers getting stuck in small networks.
// See: Security, Virology
if(length(temp_vent_parent.other_atmos_machines) &gt; 20)
vents += temp_vent</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/borer_mob_type"><aside class="declaration">var </aside>borer_mob_type <a href="https://github.com/hyperjll/tgstation/blob/be45a28c4b65857d23dc903f76861c7a8b838eb4/hypermods/code/modules/antagonists/borers/code/antagonist_stuff/antagonist_datum.dm#L15"><img src="git.png" width="16" height="16" title="hypermods/code/modules/antagonists/borers/code/antagonist_stuff/antagonist_datum.dm 15"></a></h3><p>Borer mob type, used for antag token spawns.</p><h3 id="var/cortical_owner"><aside class="declaration">var </aside>cortical_owner <aside>– /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/<a href="mob/living/basic.html">basic</a>/<a href="mob/living/basic/cortical_borer.html">cortical_borer</a></aside> <a href="https://github.com/hyperjll/tgstation/blob/be45a28c4b65857d23dc903f76861c7a8b838eb4/hypermods/code/modules/antagonists/borers/code/antagonist_stuff/antagonist_datum.dm#L12"><img src="git.png" width="16" height="16" title="hypermods/code/modules/antagonists/borers/code/antagonist_stuff/antagonist_datum.dm 12"></a></h3><p>Our linked borer, used for the antagonist panel TGUI</p><h2 id="proc">Proc Details</h2><h3 id="proc/on_gain"><aside class="parent"><a title="/datum/antagonist" href="datum/antagonist.html#proc/on_gain">↑</a></aside>on_gain<aside>()  <a href="https://github.com/hyperjll/tgstation/blob/be45a28c4b65857d23dc903f76861c7a8b838eb4/hypermods/code/modules/antagonists/borers/code/antagonist_stuff/antagonist_datum.dm#L55"><img src="git.png" width="16" height="16" title="hypermods/code/modules/antagonists/borers/code/antagonist_stuff/antagonist_datum.dm 55"></a></aside></h3><p>/datum/antagonist/cortical_borer/antag_token(datum/mind/hosts_mind, mob/spender)
var/list/vents = list()
for(var/obj/machinery/atmospherics/components/unary/vent_pump/temp_vent as anything in SSmachines.get_machines_by_type_and_subtypes(/obj/machinery/atmospherics/components/unary/vent_pump))
if(QDELETED(temp_vent))
continue
if(is_station_level(temp_vent.loc.z) &amp;&amp; !temp_vent.welded)
var/datum/pipeline/temp_vent_parent = temp_vent.parents[1]
if(!temp_vent_parent)
continue // No parent vent
// Stops Cortical Borers getting stuck in small networks.
// See: Security, Virology
if(length(temp_vent_parent.other_atmos_machines) &gt; 20)
vents += temp_vent</p>
<pre><code>if(!length(vents))
	message_admins(span_adminnotice(&quot;[spender] ([ckey(spender.key)]) tried spawning in as a borer, but no suitable vents were found!&quot;))
	return MAP_ERROR

if(isliving(spender) &amp;&amp; hosts_mind)
	hosts_mind.current.unequip_everything()
	new /obj/effect/holy(hosts_mind.current.loc)
	QDEL_IN(hosts_mind.current, 1 SECONDS)

var/mob/dead/observer/new_borer = spender
var/vent = pick(vents)
var/mob/living/basic/cortical_borer/spawned_cb = new borer_mob_type(get_turf(vent))
spawned_cb.move_into_vent(vent)
spawned_cb.PossessByPlayer(new_borer.ckey)
spawned_cb.mind.add_antag_datum(type)
notify_ghosts(
	&quot;Someone has become a borer due to spending an antag token ([spawned_cb])!&quot;,
	source = spawned_cb,
	action = NOTIFY_ORBIT,
	header = &quot;Something's Interesting!&quot;,
)
message_admins(&quot;[ADMIN_LOOKUPFLW(spawned_cb)] has been made into a borer by using an antag token.&quot;)
to_chat(spawned_cb, span_warning(&quot;You are a cortical borer! You can fear someone to make them stop moving, but make sure to inhabit them! You only grow/heal/talk when inside a host!&quot;))
</code></pre></main><footer>tgstation.dme <a href="https://github.com/hyperjll/tgstation/tree/be45a28c4b65857d23dc903f76861c7a8b838eb4">be45a28</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>